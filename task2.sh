#!/bin/bash

# List files containing "sample" and count occurrences of "CSC510"
grep -rl "sample" "$DATASET_DIR" | while read -r file; do
    count=$(grep -o "CSC510" "$file" | wc -l)
    if [ "$count" -ge 3 ]; then
        echo "$count $file"  # Output count and file name
    fi
done | sort -k1,1nr -k2,2n | awk '{sub(/file_/, "filtered_", $2); print $2}'  # Sort and substitute

EOF

# Make the script executable
chmod +x task2.sh
